const question = [
    
    {
        questao: "Em qual surat se encontra o versículo: “O ser humano certamente está em perdição”",
        resposta:
        [
            {text: "Al-Asr",correct:true},
            {text: "Ar-Humazat",correct:false},
            {text: "Al-Lail",correct:false},
            {text: "Al-Quraish",correct:false},

        ],
        explicacao: "capitulo 103"
    },
    {
        questao: "Quem disse: “Meu Senhor! Construa-me, Contigo, uma casa no Paraíso”",
        resposta:
        [
            {text: "Maryam",correct:false},
            {text: "Ássia",correct:true},
            {text: "Khadijat",correct:false},
            {text: "Fátima",correct:false},

        ],
        explicacao: "A Ássia,Ela era a esposa do Faraó,“ E Deus dá, como exemplo aos fiéis, o da mulher do Faraó,a qual disse: Ó Senhor meu, constrói-me, junto a Ti, uma morada no Paraíso, e livra-me do Faraó e das suas ações, e salva-me dos iníquos!” alcorão-cap.66:V11"
    },
    
    {
        questao: "Em qual surat é mencionado que Issa ﷺ (Jesus) não foi morto nem crucificado?",
        resposta:
        [
            {text: "Al-Bacara",correct:false},
            {text: "Ál-Imran",correct:false},
            {text: "An-Nissa",correct:true},
            {text: "Muhammad",correct:false},

        ],
        explicacao: " “Eles também foram excluídos por dizerem: “Matamos o Messias, Jesus, filho de Maria, o Mensageiro de Deus”. Na realidade, não o mataram nem o crucificaram, mas (a pessoa que mataram) foi mostrado a eles como ele. Os que discordam sobre isso estão em um dilema pleno. Eles não possuem conhecimento a esse respeito, apenas seguem suas conjecturas. Eles certamente não o mataram.”alcorão-cap.4:v157"
    },
    {
        questao: "Qual é o outro nome de Meca no Alcorão?",
        resposta:
        [
            {text: "Quiblat",correct:false},
            {text: "Madina",correct:false},
            {text: "Aqsa",correct:false},
            {text: "Bakka",correct:true}, 

        ],
        explicacao: "Bakka,“A primeira Casa (Sagrada), erigida para o Genero humano, é a de Bakka, onde reside a bênção servindo de orientação à humanidade”alcorão-cap.3:v96"
    },

    {
        questao: "No Alcorão, qual é a cidade onde desceram os dois anjos Harut e Marut?",
        resposta:
        [
            {text: "Babilônia",correct:true},
            {text: "Madina",correct:false},
            {text: "Al-Ahqaf",correct:false},
            {text: "Irã",correct:false},

        ],
        explicacao: "Babilônia,“E então, seguiram o que os demônios inventaram, acerca do Reinado de Salomão.Salomão não se tornou incrédulo, mas os demônios que ensinaram aos homens a magia se tornaram incrédulo.Seguiram também o que aconteceu com os dois anjos, Harut e Marut, na Babilônia“"
    },
    {
        questao: "Quem disse: “Acredito que não existe outra divindade além daquela em quem os Banu Israel acreditaram. E eu sou do número dos submissos”?",
        resposta:
        [
            {text: "Nabucudonosor 1",correct:false},
            {text: "Faraó",correct:true},
            {text: "Nabucudonosor 11",correct:false},
            {text: "Cesár",correct:false},

        ],
        explicacao: "Ele disse isso pouco antes de se afogar"
    },
    {
        questao: "Quem disse: “ pois eu não tive autoridade alguma sobre vós, a não ser convocar-vos, e vós me atendestes”",
        resposta:
        [
           
            {text: "Anjo da Morte",correct:false},
            {text: "Satánas",correct:true},
            {text: "Djibril",correct:false},
            {text: "Izrafil",correct:false},

        ],
        explicacao: "Alcorão-cap.14:v22"
    },
    {
        questao: "Quantos anos as pessoas das cavernas dormiram?",
        resposta:
        [
           
            {text: "8 anos",correct:false},
            {text: "1 ano",correct:false},
            {text: "308 anos",correct:false},
            {text: "309 anos",correct:true},

        ],
        explicacao: "“Eis que permaneceram na caverna trezentos e nove anos” alcorão-cap.18:v25"
    },
    {
        questao: "Quem é o Imran no Alcorão?",
        resposta:
        [
           
            {text: "Pai de Mussa (A.S)",correct:false},
            {text: "Pai de Maryam (A.S)",correct:true},
            {text: "Primo de Zakaria (A.S)",correct:false},
            {text: "Sobrinho de Yahia (A.S)",correct:false},

        ],
        explicacao: "“Recorda-te de quando a mulher de Imran disse: Ó Senhor meu, é certo que consagrei a ti, integralmente, o fruto do meuventre; aceita-o, porque és o Oniouvinte, o Sapientíssimo” alcorão-surat 3:v35"
    },
    {
        questao: "Qual é o nome do Surat que contem “Allah” em todos os seus versiculos?",
        resposta:
        [
           
            {text: "Al-Mulk",correct:false},
            {text: "Al-Ikhlass",correct:false},
            {text: "An-Nass",correct:false},
            {text: "Al-Mujadalat",correct:true},

        ],
        explicacao: "alcorão-surat 58"
    },
    {
        questao: "Allah mencionou 18 de Seus mensageiros no mesmo surat, qual é?",
        resposta:
        [
           
            {text: "Al-An'am",correct:true},
            {text: "Al-kahf",correct:false},
            {text: "AN-Najm",correct:false},
            {text: "Al-Anbiya",correct:false},

        ],
        explicacao: "alcorão-surat 6:v74-86"
    },
    {
        questao: "Quantos surats começam com as letras destacadas “Ha Mim”",
        resposta:
        [
            {text: "2",correct:false},
            {text: "3",correct:false},
            {text: "7",correct:true},
            {text: "12",correct:false},
        ],
        explicacao: "De surat(capitulo) 40 a 46, eles são chamados: surats Hawamim."
    },
    {
        questao: "Qual surat contém basmala duas vezes?",
        resposta:
        [
           
            {text: "AL-Qamar",correct:false},
            {text: "An-Naml",correct:true},
            {text: "AL-Sajdatt",correct:false},
            {text: "AL-Mumtahanat",correct:false},
        ],
        explicacao: "Alcorão-Surat 27:v29-30"
    },
    {
       
        questao: "Em qual surata é dito: “Ignora, acaso, que Deus o observa?”",
        resposta:
        [
           
            {text: "AL-Qamar",correct:false},
            {text: "Al-Alaq",correct:true},
            {text: "Al Layl",correct:false},
            {text: "Al-Aala",correct:false},
        ],
        explicacao: "Alcorão-Surat 96:v14"
    },
    {
       
        questao: "Logo após o parto, Allah recomendou que Maryam comesse",
        resposta:
        [
           
          
            {text: "Nozes",correct:false},
            {text: "Tamaras",correct:true},
            {text: "Sementes de Nigella",correct:false},
        ],
        explicacao: "“E sacode o tronco da tamareira, de onde cairão sobre ti tâmaras madura e frescas” alcorão-surat 19:25"
    },
    {
        questao: " O Alcorão também é chamado de al “Huda”. O que este termo significa?",
        resposta:
        [
          
            {text: "Misericórdia",correct:false},
            {text: "A paz",correct:false},
            {text: "Louvar",correct:false},
            {text: "A orientação",correct:true},
        ],
        explicacao: "“É o Livro sobre o qual não há dúvidas, é um guia para os piedosos” Surat 2:v2"
    },
    {
       
        questao: "​​Qual é o termo no Alcorão que está sempre associado ao Salat (oração)?",
        resposta:
        [
           
            {text: "As-saum",correct:false},
            {text: "Az-zakat",correct:true},
            {text: "Tawhid",correct:false},
            {text: "Al-hajj",correct:false},
        ],
        explicacao: "A conecção do Zakat ao Salat indica  a importância do Zakat no Islam, que corresponde à esmola aos necessitados."
    },
    {
       
        questao: "​A quem o Faraó pediu para construir uma torre para subir ao céu?",
        resposta:
        [
            {text: "Moussa (A.S)",correct:false},
            {text: "Qarun",correct:false},
            {text: "Haman",correct:true},
            {text: "Harun (A.S)",correct:false},
        ],
        explicacao: "“Ó Haman, acende, pois, (o forno), para (cozer) tijolos, e fabrica-me um monumento para que possa elevar-me até ao Deus de Moisés” Surat 28:v38"
    },
    {
        questao: "Em que montanha a arca de Nuh (A.S) encalhou?",
        resposta:
        [
           
            {text: "Suafa",correct:false},
            {text: "Monte Tur",correct:false},
            {text: "Judi",correct:true},
            {text: "Marwa",correct:false},
        ],
        explicacao: "“E as águas foram absorvidas e o desígnio foi cumprido. E (a arca) se deteve sobre o monte Al-judi” Alcorão-surat 11:v44"
    },
    {
        questao: "Como o povo de Ad foi destruído",
        resposta:
        [
           
            {text: "Um vento furioso",correct:true},
            {text: "Um terremoto",correct:false},
            {text: "Uma cheia",correct:false},
            {text: "Um choro terrível",correct:false},
        ],
        explicacao: "“E, quanto ao povo de Ad, foi exterminado por um furioso e impetuoso furacão; Que Deus desencadeou sobre ele, durante sete noites e oito nefastos dias, em que poderias ver aqueles homens jacentes, como se fossem troncos de tamareiras caídos” alcorão surat-69:v6-7"
    },

];

const questaoElement = document.getElementById("questao");
const botaoDeresposta = document.getElementById("botoes-respostas");
const botaoSeguir = document.getElementById("seguinte-btn");
const pontuacaoElement = document.getElementById("pontos");
const pontosFinalElement = document.getElementById("pontos-final");
let respostaPerguntaElement;
let incorrectAnswers = 0;
let currentQuestaoIndice = 0;
let pontos = 0;

const totalQuestoes = question.length;

function iniciarQuiz() {

    for (let i = question.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [question[i], question[j]] = [question[j], question[i]];
    }

    currentQuestaoIndice = 0;
    pontos = 0;
    botaoSeguir.disabled = true;
    pontuacaoElement.textContent = "Pontuação: 0";
    mostrarQuestao();
    document.getElementById("numero-total-questoes").textContent = `(${totalQuestoes})`;
}

function verificarResposta(index) {
    const respostas = question[currentQuestaoIndice].resposta;

    
    for (let i = 0; i < respostas.length; i++) {
        const button = botaoDeresposta.children[i];
        button.disabled = true;
    }

    for (let i = 0; i < respostas.length; i++) {
        const button = botaoDeresposta.children[i];

        if (i === index) {
            if (respostas[i].correct) {
                button.style.backgroundColor = "#22f53e";
            } else {
                button.style.backgroundColor = "rgb(253, 57, 57)";
                incorrectAnswers++;
            }
        } else if (respostas[i].correct) {
            button.style.backgroundColor = "rgb(4, 255, 4)";
        } else {
            button.style.display = "none";
        }
    }

    mostrarExplicacao(question[currentQuestaoIndice].explicacao);

    if (respostas[index].correct) {
        pontos++;
        pontuacaoElement.textContent = "Pontuação: " + pontos;
    }
}


function mostrarQuestao() {
    botaoSeguir.disabled = true;
    botaoDeresposta.innerHTML = '';
    let currentQuestao = question[currentQuestaoIndice];
    let questaoNo = currentQuestaoIndice + 1;
    questaoElement.innerHTML = questaoNo + ". " + currentQuestao.questao;
    document.getElementById("numero-total-questoes").textContent = `(${questaoNo}/${totalQuestoes})`;

    currentQuestao.resposta.forEach((resposta, index) => {
        const button = document.createElement("button");
        button.innerHTML = resposta.text;
        button.classList.add("btn");
        button.addEventListener("click", function () {
            verificarResposta(index);
            botaoSeguir.disabled = false;
        });
        botaoDeresposta.appendChild(button);
    });
}

function mostrarExplicacao(explicacao) {
    const explicacaoDiv = document.getElementById("explicacao");

    if (explicacao) {
        explicacaoDiv.textContent = explicacao;
        const respostaDiv = document.querySelector(".resposta-da-pergunta");
        respostaDiv.classList.add("com-borda");
        respostaDiv.style.backgroundColor = "white";
    } else {
        explicacaoDiv.textContent = "";
        const respostaDiv = document.querySelector(".resposta-da-pergunta");
        respostaDiv.classList.remove("com-borda");
        respostaDiv.style.backgroundColor = "transparent";
    }

    const respostaDiv = document.querySelector(".resposta-da-pergunta");
    respostaDiv.style.display = "block";
}




function limparExplicacao() {
    const respostaDiv = document.querySelector(".resposta-da-pergunta");
    respostaDiv.style.display = "none";
    respostaDiv.classList.remove("com-borda");
    document.getElementById("explicacao").textContent = "";
}
function mostrarProximaQuestao() {
    currentQuestaoIndice++;
    if (currentQuestaoIndice < totalQuestoes) {
        mostrarQuestao();
        limparExplicacao();
        botaoSeguir.disabled = true;
    } else {
        mostrarPontuacaoFinal();
    }
}

function mostrarPontuacaoFinal() {
    questaoElement.innerHTML = "<div style='text-align: center;color:red'>Quiz Concluído!</div>";
    botaoDeresposta.innerHTML = `Respostas Corretas: ${pontos}<br> Respostas Incorretas: ${incorrectAnswers}`;
    pontuacaoElement.style.display = "none";
    limparExplicacao();

    const barraProgresso = document.getElementById("barra-progresso");
    const progressoPorcentagem = document.getElementById("progresso-porcentagem");
    const porcentagemCorreta = (pontos / question.length) * 100;

    progressoPorcentagem.style.width = "0";
    progressoPorcentagem.textContent = "0%";
    barraProgresso.style.display = "block";

    const intervalo = 10;
    const incremento = porcentagemCorreta / (1000 / intervalo);

    let larguraAtual = 0;
    const animacaoBarra = setInterval(() => {
        larguraAtual += incremento;
        progressoPorcentagem.style.width = larguraAtual + "%";
        progressoPorcentagem.textContent = larguraAtual.toFixed(2) + "%";

        if (larguraAtual >= porcentagemCorreta) {
            clearInterval(animacaoBarra);
            mostrarBotoesFinais();
            const mensagemFinal = document.getElementById("mensagem-final");
            const reiniciarBtn = document.getElementById("reiniciar-btn");
            const proximoNivelBtn = document.getElementById("proximo-nivel-btn");

            if (porcentagemCorreta > 50) {
                mensagemFinal.textContent = "Masha Allah!";
                reiniciarBtn.style.display = "none";
                proximoNivelBtn.style.display = "block";
            } else {
                mensagemFinal.textContent = "Fraco! Jogue novamente.";
                reiniciarBtn.style.display = "block";
                proximoNivelBtn.style.display = "none";
            }
        }
    }, intervalo);
}



function mostrarBotoesFinais() {

    const reiniciarBtn = document.getElementById("reiniciar-btn");
    const paginaInicialBtn = document.getElementById("pagina-inicial-btn");
    const quizResultDiv = document.querySelector(".Quiz-result");
    pontosFinalElement.textContent = pontos;

    reiniciarBtn.style.display = "block";
    paginaInicialBtn.style.display = "block";
    quizResultDiv.style.display = "block";
    botaoSeguir.style.display = "none";
}

function reiniciarQuiz() {
    currentQuestaoIndice = 0;
    pontos = 0;
    botaoSeguir.disabled = true;
    pontuacaoElement.textContent = "Respostas Certas: 0";
    mostrarQuestao();
    limparExplicacao();

    document.querySelector(".Quiz-result").style.display = "none";
    document.getElementById("barra-progresso").style.display = "none";
    botaoSeguir.style.display = "block";
    document.getElementById("mensagem-final").textContent = "";

}

function proximoNivel()
{
    window.location.href= "MohIniciante.html";
}
function voltarPaginaInicial() {
    window.location.href = "index.html";
}
window.reiniciarQuiz = reiniciarQuiz;
window.iniciarQuiz = iniciarQuiz;
window.mostrarProximaQuestao = mostrarProximaQuestao;
window.voltarPaginaInicial = voltarPaginaInicial;
window.proximoNivel= proximoNivel;